<script setup lang="ts">
import { ref } from "vue";

const hostCount = ref(0);
const remoteCount = ref(0);

const increment = () => {
  hostCount.value++;
};

const handleRemoteUpdate = (count: number) => {
  console.log("æ”¶åˆ°é ç«¯å…ƒä»¶ Count:", count);
  remoteCount.value = count;
};
</script>

<template>
  <div class="container">
    <h1>ğŸ  Host App (Port 3000)</h1>
    <p>é€™æ˜¯ Module Federation çš„ Host æ‡‰ç”¨</p>

    <section class="section">
      <h2>ğŸ“¦ æœ¬åœ°å…ƒä»¶</h2>
      <div class="local-box">
        <p>é€™æ˜¯ Host æ‡‰ç”¨ä¸­çš„æœ¬åœ°å…ƒä»¶ ï¼</p>
        <p>Host Count: {{ hostCount }}</p>
        <p>Remote Count (ä¾†è‡ªé ç«¯): {{ remoteCount }}</p>
        <button @click="increment">å¢åŠ  Host Count</button>
      </div>
    </section>

    <section class="section">
      <h2>ğŸŒ é ç«¯å…ƒä»¶ (ä¾†è‡ª Remote æ‡‰ç”¨)</h2>
      <!-- 
        å‚³é props: :count="hostCount"
        ç›£è½äº‹ä»¶: @update-count="handleRemoteUpdate" 
        (é ç«¯å…ƒä»¶éœ€è¦ emit 'update-count' ä¸¦å¸¶ä¸Šæ•¸å€¼)
      -->
      <RemoteWrapper :count="hostCount" @update-count="handleRemoteUpdate" />
    </section>
  </div>
</template>

<style>
body {
  font-family: system-ui, -apple-system, sans-serif;
  margin: 0;
  padding: 20px;
  background: #f5f5f5;
}

.container {
  max-width: 800px;
  margin: 0 auto;
}

h1 {
  color: #333;
}

.section {
  margin: 30px 0;
}

.section h2 {
  color: #555;
  border-bottom: 2px solid #ddd;
  padding-bottom: 10px;
}

.local-box {
  padding: 20px;
  background: #e3f2fd;
  border-radius: 8px;
}

.message {
  margin-top: 10px;
  padding: 10px;
  background: #fff3e0;
  border-radius: 4px;
  color: #e65100;
}
</style>
